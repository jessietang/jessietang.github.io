---
layout: post
title: 遍历生成的el-select值的绑定，选中一个其他不变
date: 2022-09-02
tags: "#vue, #el-select"
categories: ["vue"]
---

#### 问题：在做项目的时候，table数据是动态获取的，table的某一列展示全是select下拉框，table的另一列是根据当前行有select的那一列选择的数据，来进行响应的操作。这个时候，每一个el-select组件绑定的值都是同一个，改变某一行的select的数据，其他行的都会跟着变（因为绑定的是同一个值）。

简单点描述就是：有一个数据列表，例如：
```javascript
// 源数据
var tableData = [
    {
        id: 1,
        name: '第一行数据',
        types: [
            {
                id: 't1',
                name: 'aaa'
            },
            {
                id: 't2',
                name: 'bbb'
            },
            {
                id: 't3',
                name: 'ccc'
            }
        ]
    },
    {
        id: 2,
        name: '第二行数据',
        types: [
            {
                id: 't4',
                name: 'ddd'
            },
            {
                id: 't5',
                name: 'eee'
            }
        ]
    }
]

// 操作方法
handlePreview(row){
    console.log('当前行选中的值为：' + row.selectedValue)
}
```

页面布局代码：
```html
<template>
    <el-table
      :data="tableData"
      style="width: 100%">
      <el-table-column
        prop="name"
        label="名字">
      </el-table-column>
      <el-table-column
        prop="types"
        label="类别">
        <template slot-scope="scope">
            <!-- 重点是这里怎么绑定v-model值 -->
            <el-select v-model="scope.row.selectedValue">
                <el-option 
                    v-for="item in scope.row.types" 
                    :key="item.id" 
                    :label="item.name" 
                    :value="item.id">
                </el-option>
            </el-select>
        </template>
      </el-table-column>
      <el-table-column
        prop=""
        label="操作">
        <template slot-scope="scope">
            <el-button @click="handlePreview(scope.row)">查看</el-button>
        </template>
      </el-table-column>
    </el-table>
  </template>
```

解决思路： 只要让每一个选择器绑定的数据不一样就可以了，但拿到的tableData数组中的对象没有一个合适的属性去跟选择器绑定，那便新增一个属性好了。一开始，当前行数据scope.row里面没有selectedValue这个值，与其绑定的话，不会有值显示出来，后续点击选中某一项，scope.row就会新增selectedValue这个属性，属性值为选中的值，且其他行的选择器不受影响。